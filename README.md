# node-play

Playing around with Node

##Documentation

Base URL for Deployed API: https://how-to-backend.herokuapp.com/


## **Endpoints**

| Request| URL | Description | Requires Token | 
| ------------- | ------------- | ---------| ---------|
| POST | /api/auth/register  | register as a new user | - |
| POST  | /api/auth/login  | login as existing user | - |
| POST  | /api/auth/comments  | adds comment | X |
| POST  | /api/auth/questions  | adds question | X |
| GET  | /api/auth/users  | gets all users | X |
| GET  | /api/auth/users/:id  | gets a specifc user | X |
| GET  | /api/auth/questions  | gets all questions | X |
| GET  | /api/auth/questions/:id  | gets a specific question | X |
| GET  | /api/auth/comments  | gets all comments | X |
| GET  | /api/auth/comments/:id  | gets a specific comment | X |
| PUT  | /api/auth/users/:id  | edits info for user with given id | X |
| PUT  | /api/auth/questions/:id  | edits info for question with given id | X |
| PUT  | /api/auth/comments/:id  | edits info for comment with given id | X |
| DELETE  | /api/auth/questions/:id  | deletes question with given id | X |
| DELETE  | /api/auth/comments/:id  | deletes comment with given id | X |
| DELETE  | /api/auth/users/:id  | deletes user with given id | X |


## **Table Requirements**

## **Users**

| Name | Type | Required | Unique | Notes |
| ---- | ---- | -------- | ------ | ----- |
| id | integer | yes | yes | User id (auto generated by API) |
| username | string | yes | yes | User's username |
| password | string | yes | no | User's password |
| email | string | no | no | User's email |

## **Questions**
| Name | Type | Required | Unique | Notes |
| ---- | ---- | -------- | ------ | ----- |
| id | integer | yes | yes | id (auto generated by API) |
| question | string | yes | no | Question |

## **Comments**
| Name | Type | Required | Unique | Notes |
| ---- | ---- | -------- | ------ | ----- |
| id | integer | yes | yes | id (auto generated by API) |
| comment | string | yes | no | Comment |
| user_id | integer | yes | - | References user posting comment|
| question_id | integer | yes | - | References which question |


## **Requests and Returns**

### POST /api/auth/register
Request Body:
```
{
    "username": "steve",
    "password": "asd",
    "email": "steve@steve.com"
}
```
Returns:
```
{
    "data": {
        "username": "steve",
        "password": "$2a$10$kAyIAU66yeI4fl1i.jsFDObNQzTWE8yEYBUCjrwv4tCOTZMXhqJuK",
        "email": "steve@steve.com"
    },
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpYXQiOjE1OTYwNDIyNDgsImV4cCI6MTU5NjkwNjI0OH0.dhceDKx92TEF8B1HqyUUiP6nEX3PIOd_Poqpyu50TQA"
}
```
### POST /api/auth/login
Request Body:
```
{
    "username": "steve",
    "password": "asd"
}
```
Returns:
```
{
    "message": "Welcome",
    "user": {
        "id": 5,
        "username": "steve",
        "password": "$2a$10$kAyIAU66yeI4fl1i.jsFDObNQzTWE8yEYBUCjrwv4tCOTZMXhqJuK",
        "email": "steve@steve.com"
    },
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWJqZWN0Ijo1LCJ1c2VybmFtZSI6InN0ZXZlIiwiaWF0IjoxNTk2MDQyNDM2LCJleHAiOjE1OTY5MDY0MzZ9.k-LlBxQ7mrVKkDQkX8b4iO9M6blhtxt_hbZ0hvVA3Cw"
}
```
### POST /api/auth/questions
Request Body:
```
{
    "question": "What is 2 + 2"
}
```
Returns:
```
{
    "Posted": {
        "question": "What is 2 + 2"
    }
}
```
### POST /api/auth/comments
Request Body:
```
{
    "comment": "I am not sure",
    "user_id": 1,
    "question_id": 2
}
```
Returns:
```
{
    "Posted": {
        "comment": "I am not sure",
        "user_id": 1,
        "question_id": 2
    }
}
```
### GET /api/auth/users
Returns: 
```
[
    {
        "id": 1,
        "username": "Mark",
        "password": "asd",
        "email": "email@email.com"
    },
    {
        "id": 2,
        "username": "Steve",
        "password": "asd",
        "email": "testemail@email.com"
    },
    {
        "id": 3,
        "username": "Bob",
        "password": "asd",
        "email": "emailtest@email.com"
    },
    {
        "id": 4,
        "username": "new user",
        "password": "$2a$10$5AczzVTq8C5CkZ3nbYkBb.XCjhLQr/XbrW55Yg8M8bgQHeSY1As8O",
        "email": null
    },
    {
        "id": 5,
        "username": "steve",
        "password": "$2a$10$kAyIAU66yeI4fl1i.jsFDObNQzTWE8yEYBUCjrwv4tCOTZMXhqJuK",
        "email": "steve@steve.com"
    }
]
```
### GET /api/auth/users/:id
Returns:
```
{
    "id": 1,
    "username": "Mark",
    "password": "asd",
    "email": "email@email.com"
}
```
### GET /api/auth/questions
Returns:
```
[
    {
        "id": 1,
        "question": "Why is the sky blue?"
    },
    {
        "id": 2,
        "question": "What is the meaning of life?"
    },
    {
        "id": 3,
        "question": "Why is pitbull popular?"
    },
    {
        "id": 4,
        "question": "What is 2 + 2"
    },
]
```
### GET /api/auth/questions/:id
Returns:
```
{
    "id": 1,
    "question": "Why is the sky blue?"
}
```
### GET /api/auth/comments
Returns:
```
[
    {
        "id": 1,
        "comment": "Because its my favorite color",
        "user_id": 1,
        "question_id": 1
    },
    {
        "id": 2,
        "comment": "I dont know",
        "user_id": 2,
        "question_id": 1
    },
    {
        "id": 3,
        "comment": "42",
        "user_id": 1,
        "question_id": 2
    },
    {
        "id": 5,
        "comment": "I dont know",
        "user_id": 2,
        "question_id": 2
    },
    {
        "id": 6,
        "comment": "No one knows",
        "user_id": 1,
        "question_id": 3
    },
    {
        "id": 4,
        "comment": "I am not sure",
        "user_id": 1,
        "question_id": 2
    },
]
```
### GET /api/auth/comments/:id
Returns:
```
{
    "id": 1,
    "comment": "Because its my favorite color",
    "user_id": 1,
    "question_id": 1
}
```
### PUT /api/auth/users/:id
Request Body:
```
{
   "username": "Mark",
   "password": "asd",
   "email": "email@gmail.com"
}
```
Returns:
```
{
    "Message": "Updated User"
}
```
### PUT /api/auth/questions/:id
Request Body:
```
{
    "question": "What is 2 + 3"
}
```
Returns:
```
{
    "Updated": "Question with id: 6"
}
```
### PUT /api/auth/comments/:id
Request Body:
```
{
    "comment": "I am not sure",
    "user_id": 1,
    "question_id": 2
}
```
Returns:
```
{
    "Updated": "Comment with id: 9"
}
```
### DELETE /api/auth/questions/:id
Returns:
```
{
    "Removed": "Question with id: 6"
}
```
### DELETE /api/auth/users/:id
Returns:
```
{
    "Removed": "User with id: 9"
}
```
### DELETE /api/auth/comments/:id
Returns:
```
{
    "Removed": "Comment with id: 9"
}
```
